<script>
async function fetchRealSignal() {
  try {
    const res = await fetch("latest_signal.json"); // ملف JSON المُرسل من MT5
    const signal = await res.json();

    document.getElementById("recommendation").textContent = signal.signal || "--";
    document.getElementById("price").textContent = signal.price || "--";
    document.getElementById("tp").textContent = signal.tp || "--";
    document.getElementById("sl").textContent = signal.sl || "--";
    document.getElementById("duration").textContent = signal.duration + " ثانية" || "--";
    document.getElementById("confidence").textContent = signal.confidence + "%" || "--";

    const log = `${signal.signal} @ ${signal.price} 🎯 ${signal.tp} / 🛑 ${signal.sl} / ⏱ ${signal.duration} / 📊 ${signal.confidence}%`;
    const li = document.createElement("li");
    li.textContent = log;
    document.getElementById("historyList").prepend(li);

  } catch (e) {
    console.error("فشل تحميل الإشارة الحية:", e);
  }
}

// تحديث كل 5 ثوانٍ
setInterval(fetchRealSignal, 5000);
fetchRealSignal();
</script>
